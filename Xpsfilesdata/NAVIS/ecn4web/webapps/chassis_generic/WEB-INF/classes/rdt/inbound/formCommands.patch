--- C:\N4\trunk\ecn4-app\ecn4web\rdt\inbound\formCommands.xml	Fri Jan 15 16:50:15 2016 UTC
+++ C:\N4\trunk\ecn4-app\ecn4-extensions\sample\chassis_generic\rdt\inbound\formCommands.xml	Thu Jan 21 22:37:21 2016 UTC
@@ -2,6 +2,10 @@
 <!--
   ~ Copyright (c) 2012 Navis LLC. All Rights Reserved.
   ~ - a 2nd line is required by Checkstyle -
+
+  ~ This is a generic implementation which allows all chassis options
+  ~ not likely to be used at site.
+  ~ see specific comments in the file to note where it differs from a standard formCommands.xml
   -->
 
 <form-list xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
@@ -16,11 +20,20 @@
         <command index="3" template="placeInLocation" enabled="exists(//job/container)" pattern="command.Complete_to">
             <field pattern="field.New_location"/>
         </command>
-        <command index="4" template="placeContainerOnTruck" pattern="command.Place_on.input">
+        <!-- Begin diff from standard formCommands.xml -->
+        <command index="4" template="placeContainerOnTruck" visible="not(/message/che/@ACHE)" pattern="command.Place_on.input">
             <field pattern="field.Yard_Tractor_ID"/>
         </command>
-        <command index="5" template="cancel" pattern="command.Cancel" fixed="footer"/>
-        <command index="6" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <command index="5" template="placeContainerOnTruck" visible="exists(/message/che/@ACHE)" pattern="command.Place_on.input">
+            <field pattern="field.Yard_Tractor_ID"/>
+            <field pattern="field.Chassis_ID" value="{/message/che/@TRAL}"/>
+        </command>
+        <command index="6" template="dispatchITVtoJob" visible="/message/che/@CFCL='Y'" pattern="command.Dispatch_to">
+            <field pattern="field.Yard_Tractor_ID"/>
+        </command>
+        <command index="7" template="cancel" pattern="command.Cancel" fixed="footer"/>
+        <command index="8" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <!-- End diff from standard formCommands.xml -->
     </form>
     <form id="FORM_DISPATCH" mode="TWIN" default="dispatch">
         <command index="1" template="jobDone" pattern="command.Job_done"/>
@@ -32,17 +45,23 @@
             <field pattern="field.New_location"/>
             <field pattern="field.New_location2"/>
         </command>
-        <command index="4" template="placeContainerOnTruck" pattern="command.Place_on.input">
+        <!-- Begin diff from standard formCommands.xml -->
+        <command index="4" template="placeContainerOnTruck" visible="not(/message/che/@ACHE)" pattern="command.Place_on.input">
             <field pattern="field.Yard_Tractor_ID"/>
         </command>
-        <command index="5" template="dispatch" visible="/message/che/work/@count = '2'" pattern="command.Select">
-            <field pattern="field.Container_ID"/>
+        <command index="5" template="placeContainerOnTruck" visible="exists(/message/che/@ACHE)" pattern="command.Place_on.input">
+            <field pattern="field.Yard_Tractor_ID"/>
+            <field pattern="field.Chassis_ID" value="{/message/che/@TRAL}"/>
         </command>
-        <command index="6" template="swapTwinPositions" pattern="command.Swap_twin_positions"/>
-        <command index="7" template="cancel" pattern="command.Cancel" fixed="footer"/>
-        <command index="8" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
-        <command index="9" template="singleDispatchFwd" pattern="command.Single_of_Twin" abbrev-pattern="command.Complete_to.arrow" fixed="legend"/>
-        <command index="10" template="singleDispatchAft" pattern="command.Single_of_Twin" abbrev-pattern="command.Complete_to.arrow" fixed="legend"/>
+        <command index="6" template="dispatchITVtoJob" visible="/message/che/@CFCL='Y'" pattern="command.Dispatch_to">
+            <field pattern="field.Yard_Tractor_ID"/>
+        </command>
+        <command index="7" template="swapTwinPositions" pattern="command.Swap_twin_positions"/>
+        <command index="8" template="cancel" pattern="command.Cancel" fixed="footer"/>
+        <command index="9" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <command index="10" template="singleDispatchFwd" pattern="command.Single_of_Twin" abbrev-pattern="command.Complete_to.arrow" fixed="legend"/>
+        <command index="11" template="singleDispatchAft" pattern="command.Single_of_Twin" abbrev-pattern="command.Complete_to.arrow" fixed="legend"/>
+        <!-- End diff from standard formCommands.xml -->
     </form>
     <form id="FORM_DISPATCH" mode="TWIN_TRUCK" default="dispatch">
         <command index="1" template="autoPlaceContainerOnTruck" enabled="exists(/message/che/work/job/position[@type = 'to']/@transport)"
@@ -101,11 +120,22 @@
         <command index="1" template="autoPlaceContainerOnTruck"
                  pattern="command.Place_on_with_position"
                  params="{/message/che/work/job/position[@type = 'to']/@transport},{/message/che/work/job/position[@type = 'to']/@TKPS}"/>
-
-        <command index="4" template="placeContainerOnTruck" pattern="command.Place_on.input">
+        <!-- Begin diff from standard formCommands.xml -->
+        <command index="4" template="placeContainerOnTruck" visible="not(/message/che/@ACHE)" pattern="command.Place_on.input">
             <field pattern="field.Yard_Tractor_ID"/>
-            <field pattern="field.Position_On_Truck"/>
         </command>
+        <command index="5" template="placeContainerOnTruck" visible="exists(/message/che/@ACHE)" pattern="command.Place_on.input">
+            <field pattern="field.Yard_Tractor_ID"/>
+            <field pattern="field.Chassis_ID" value="{/message/che/@TRAL}"/>
+        </command>
+        <command index="6" template="dispatchITVtoJob" visible="/message/che/@CFCL='Y'" pattern="command.Dispatch_to">
+            <field pattern="field.Yard_Tractor_ID"/>
+        </command>
+        <command index="7" template="cancel" pattern="command.Cancel" fixed="footer"/>
+        <command index="8" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <command index="9" template="singleDispatchFwd" pattern="command.Single_of_Twin" abbrev-pattern="command.Complete_to.arrow" fixed="legend"/>
+        <command index="10" template="singleDispatchAft" pattern="command.Single_of_Twin" abbrev-pattern="command.Complete_to.arrow" fixed="legend"/>
+        <!-- End diff from standard formCommands.xml -->
     </form>
     <form id="FORM_DISPATCH_LIFTED" mode="">
         <command index="1" template="jobDone" pattern="command.Job_done"/>
@@ -190,15 +220,25 @@
     </form>
     <form id="FORM_TRUCK_TRAILER_SELECTION" mode="">
         <command index="1" template="selectTrailerAttached" pattern="command.Yes_Im_connected_to_a_trailer"/>
-        <command index="2" template="selectTrailerUnattached" pattern="command.No,_I'm_not_connected_to_a_trailer"/>
-        <command index="3" template="makeUnavailable" pattern="command.Unavailable" fixed="footer"/>
-        <command index="4" template="logout" pattern="command.Logout" fixed="footer"/>
-        <command index="5" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <!-- Begin diff from standard formCommands.xml -->
+        <command index="2" template="selectSpecificTrailerAttached" pattern="command.Yes_Im_connected_to_a_specific_trailer">
+            <field pattern="field.Chassis_ID"/>
+        </command>
+        <command index="3" template="selectTrailerUnattached" pattern="command.No,_I'm_not_connected_to_a_trailer"/>
+        <command index="4" template="makeUnavailable" pattern="command.Unavailable" fixed="footer"/>
+        <command index="5" template="logout" pattern="command.Logout" fixed="footer"/>
+        <command index="6" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <!-- End diff from standard formCommands.xml -->
     </form>
     <form id="FORM_TRUCK_FETCH_TRAILER" mode="" default="fetchTrailer">
         <command index="1" template="fetchTrailer" pattern="command.Pull_empty_trailer"/>
-        <command index="2" template="cancel" pattern="command.Cancel" fixed="footer"/>
-        <command index="3" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <!-- Begin diff from standard formCommands.xml -->
+        <command index="2" template="fetchTrailerWithChassisId" pattern="command.Pull_empty_trailer">
+            <field pattern="field.Chassis_ID"/>
+        </command>
+        <command index="3" template="cancel" pattern="command.Cancel" fixed="footer"/>
+        <command index="4" template="clearMessage" enabled="/message/che/displayMsg/@msgID='12'" pattern="command.Clear_message" fixed="message"/>
+        <!-- End diff from standard formCommands.xml -->
     </form>
     <form id="FORM_TRUCK_PARK_TRAILER" mode="" default="detachTrailer">
         <command index="1" template="parkTrailer"
