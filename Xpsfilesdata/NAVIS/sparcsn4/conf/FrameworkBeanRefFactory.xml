<?xml version="1.0" encoding="UTF-8"?>

<!--
  ~ Copyright (c) 2012 Navis LLC. All Rights Reserved.
  ~
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"
        default-lazy-init="true">
    <!--Framework Factories
 For more info, refer to
 http://www.springframework.org/docs/api/org/springframework/beans/factory/access/SingletonBeanFactoryLocator.html
 -->
    <!-- PORTAL TIER DEFINITIONS-->
    <bean id="com.navis.framework.portal.beanfactorymappings" class="com.navis.framework.util.context.filepath.FilePathMappings">
        <property name="mappings">
            <list>
                <value>portal/FrameworkPortalContext.xml</value>
                <value>portal/cache/CachePortalContext.xml</value>
                <value>portal/LocalizationAppContext.xml</value>
                <value>security/Security3AppContext.xml</value>
                <value>portal/ExtensionPortalContext.xml</value>
                <value>portal/ExtensionDataModelPortalContext.xml</value>
                <value>portal/EventPortalContext.xml</value>
            </list>
        </property>
    </bean>

    <!--tobe overridden by application-->
    <bean id="com.navis.app.portal.beanfactorymappings" class="com.navis.framework.util.context.filepath.FilePathMappings">
    </bean>

    <!-- Portal tier must sit on top of the business tier factory to access persistence-->
    <bean id="com.navis.app.portal" class="com.navis.framework.util.context.AggregatedClassPathXmlApplicationContext">
        <constructor-arg index="0">
            <list>
                <ref bean="com.navis.framework.portal.beanfactorymappings"/>
                <ref bean="com.navis.app.portal.beanfactorymappings"/>
            </list>
        </constructor-arg>
        <constructor-arg index="1">
            <ref bean="app"/>
        </constructor-arg>
    </bean>

    <bean id="com.navis.framework.presentation.beanfactorymappings" class="com.navis.framework.util.context.filepath.FilePathMappings">
        <property name="mappings">
            <list>
                <value>presentation/FrameworkPresentationAppContext.xml</value>
                <value>presentation/FrameworkMVCPresentationAppContext.xml</value>
                <value>presentation/SecurityPresentationAppContext.xml</value>
                <value>presentation/ReferencePresentationAppContext.xml</value>
                <value>presentation/ExtensionPresentationAppContext.xml</value>
            </list>
        </property>
    </bean>

    <bean id="com.navis.framework.ulc.beanfactorymappings"
          class="com.navis.framework.util.context.filepath.FilePathMappings">
        <property name="beanMappings">
            <list>
                <ref bean="com.navis.framework.presentation.beanfactorymappings"/>
            </list>
        </property>
        <property name="fileMappings">
            <list>
                <value>ulc/FrameworkUlcAppContext.xml</value>
                <value>ulc/FrameworkNavigationUlcAppContext.xml</value>
                <value>ulc/FrameworkMVCUlcAppContext.xml</value>
                <value>ulc/SecurityNavigationUlcAppContext.xml</value>
                <value>ulc/ExtensionNavigationUlcAppContext.xml</value>
                <value>ulc/FrameworkMenuUlcAppContext.xml</value>
                <value>performance/ulc/DbPerformanceUlcAppContext.xml</value>
            </list>
        </property>
    </bean>
    <bean id="com.navis.framework.zk.beanfactorymappings" class="com.navis.framework.util.context.filepath.FilePathMappings">
        <property name="beanMappings">
            <list>
                <ref bean="com.navis.framework.presentation.beanfactorymappings"/>
            </list>
        </property>
        <property name="mappings">
            <list>
                <value>zk/FrameworkZkAppContext.xml</value>
                <value>zk/FrameworkNavigationZkAppContext.xml</value>
                <value>zk/FrameworkMVCZkAppContext.xml</value>
                <value>zk/FrameworkMenuZkAppContext.xml</value>
            </list>
        </property>
    </bean>
    <!-- This definition is used for testing ONLY.
        During deployment, the web.xml definition for "contextConfigLocation" is used.
   -->
    <bean id="com.navis.framework.web"
          class="org.springframework.context.support.ClassPathXmlApplicationContext">
        <constructor-arg index="0">
            <list>
                <value>web/FrameworkApplicationContext.xml</value>
            </list>
        </constructor-arg>
        <constructor-arg index="1">
            <ref bean="com.navis.framework.presentation"/>
        </constructor-arg>
    </bean>
    <bean id="com.navis.framework.presentation"
          class="com.navis.framework.util.context.AggregatedClassPathXmlApplicationContext">
        <!-- This bean should never be instantiated by name-->
        <constructor-arg index="0">
            <list>
                <ref bean="com.navis.framework.presentation.beanfactorymappings"/>
            </list>
        </constructor-arg>
    </bean>
    <bean id="com.navis.framework.ulc"
          class="com.navis.framework.util.context.AggregatedClassPathXmlApplicationContext">
        <constructor-arg index="0">
            <list>
                <ref bean="com.navis.framework.ulc.beanfactorymappings"/>
            </list>
        </constructor-arg>
    </bean>
    <bean id="beanFactoryLocation" class="com.navis.framework.util.context.BeanFactoryLocation"/>
    <!-- default ulc factory based on module dependency-->
    <bean id="com.navis.app.ulc"
          class="com.navis.framework.util.context.modules.ModuleDependencyPathXmlApplicationContext">
        <constructor-arg index="0">
            <ref bean="beanFactoryLocation"/>
        </constructor-arg>
    </bean>
    <!-- default zk factory based on module dependency-->
    <bean id="com.navis.app.zk"
          class="com.navis.framework.zk.server.context.ZkModuleDependencyPathZkApplicationContext">
        <constructor-arg index="0">
            <ref bean="beanFactoryLocation"/>
        </constructor-arg>
    </bean>
</beans>
