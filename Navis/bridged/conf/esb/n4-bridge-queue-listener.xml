<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:spring="http://www.springframework.org/schema/beans"
      xmlns:p="http://www.springframework.org/schema/p"
      xmlns:jms="http://www.mulesoft.org/schema/mule/jms"
      xmlns:quartz="http://www.mulesoft.org/schema/mule/quartz"
      xmlns:stdio="http://www.mulesoft.org/schema/mule/stdio"
      xmlns:vm="http://www.mulesoft.org/schema/mule/vm"
      xmlns:http="http://www.mulesoft.org/schema/mule/http"
      xsi:schemaLocation="
          http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
          http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/3.1/mule-jms.xsd
          http://www.mulesoft.org/schema/mule/quartz http://www.mulesoft.org/schema/mule/quartz/3.1/mule-quartz.xsd
          http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.1/mule.xsd
          http://www.mulesoft.org/schema/mule/stdio http://www.mulesoft.org/schema/mule/stdio/3.1/mule-stdio.xsd
          http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/3.1/mule-vm.xsd
          http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/3.1/mule-http.xsd">

    <!-- jms:endpoint name="h" queue="bridge.NAVIS/ANR/DPW/AGW?connector=jmsExternalConnector" connector-ref="jmsExternalConnector"/ -->
    <jms:endpoint name="bridge-n4-queue-staf"
                  queue="bridge.${com.navis.shared.cache.scope.OPR}/${com.navis.shared.cache.scope.CPX}/${com.navis.shared.cache.scope.FAC}/${com.navis.shared.cache.scope.YRD}?connector=jmsExternalConnector"
                  connector-ref="jmsExternalConnector"/>
    <flow name="Bridge-n4-Staf-flow">
        <inbound-endpoint ref="bridge-n4-queue-staf" exchange-pattern="one-way"/>
        <log-component/>
        <custom-processor class="com.navis.bridged.staf.command.Ecn4StafQueueListener" name="ecn4-staf-queue-listener"/>
        <default-exception-strategy/>
        <!-- creates a single client flow: -->
        <threading-profile doThreading="false" maxThreadsActive="1"/>
    </flow>

</mule>